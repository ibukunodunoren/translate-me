<html lang="en">
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" type="text/css" href="../css/style.css" />
        <script type="text/javascript" src="../js/worker_handler.js"></script>
        <script type="text/javascript" src="../js/deepgram.js"></script>

        <title>Translate - Translate Me</title>
        <link rel="icon" type="image/x-icon" href="sentiment/meh.png">
    </head>

    <body>
    <!-- <p id="status">Loading</p>
    <p id="translation"></p>
    <p id="transcript"></p> -->

        <div class=navbar>
            <div class=logo>
                <a href="index.html"><h1>Translate Me</h1></a>
            </div>
            <div class=nav-links>
                <a href="about.html">About</a>
                <a href="https://github.com/ibukunodunoren/translate-me">GitHub</a>
                <a href="https://devpost.com/software/pending-ktcxao">Devpost</a>
            </div>
        </div>
        
        <div class=content>
            <div class=content-card>
                <div class=content-title>
                    <h2>English Transcript</h2>
                </div>
<<<<<<< HEAD:index.html
                <p id="english-transcript">Press the start button in the bottom right of the screen to begin transcribing</p><br>
                
=======
                <p id="english-transcript"></p><br>
>>>>>>> 870ac4b76f0515e02075793f1de7b87d435be421:public/views/index.html
            </div>
            
            <div class=content-card>
                <div class=content-title>
                    <h2>Translated Transcript</h2>
                </div>
                <p id="translated-transcript"></p><br>
            </div>
            
            <div class=content-card>
                <div class=content-title>
                    <h2>Sentiment</h2>
                </div>
                <div class=sentiment>
                    <div class=sentiment-card>
                        <h3>Speaker 1</h3>
                        <img id=sentiment_img_1 src="../sentiment/circle.png"></img>
                    </div>
                    
                    <div class=sentiment-card>
                        <h3>Speaker 2</h3>
                        <img id=sentiment_img_2 src="../sentiment/circle.png"></img>
                    </div>
                    
                    <p id="status">Not Connected</p>
                    <button onclick="transcribe()">Start Transciption</button>
                    <button onclick="startWorker()">Start Worker</button>
                    <button onclick="stopWorker()">Stop Worker</button>
                </div>
            </div>
        </div>
<<<<<<< HEAD:index.html
        
        <br>

        <!-- <script>
            navigator.mediaDevices.getUserMedia({ audio: true }).then((stream) => {
              console.log({ stream });
              if (!MediaRecorder.isTypeSupported("audio/webm"))
                alert("Browser not supported");
              const input = new MediaRecorder(stream, {
                mimeType: "audio/webm",
              });
              const websocket = new WebSocket("wss://api.deepgram.com/v1/listen", [
                "token",
                "e7be61060c96f293ab1703011527704193cd5406",
              ]);
              websocket.onopen = () => {
                document.querySelector("#status").textContent = "Start speaking...";
                console.log({ event: "onopen" });
                input.addEventListener("dataavailable", async (event) => {
                  if (event.data.size > 0 && websocket.readyState == 1) {
                    websocket.send(event.data);
                  }
                });
                input.start(250);
              };
      
              websocket.onmessage = (message) => {
                const received = JSON.parse(message.data);
                const transcript = received.channel.alternatives[0].transcript;
                if (transcript && received.is_final) {
                  //inside here run translation
      
                  //get translated word
                  //rewrite tranlations
                //   console.log(translation);
                //   document.querySelector("#translation").textContent += //translated transript
                    console.log(transcript);
                  document.querySelector("#transcript").textContent +=
                    transcript + " ";
                }
              };
      
              websocket.onclose = () => {
                console.log({ event: "onclose" });
              };
      
              websocket.onerror = (error) => {
                console.log({ event: "onerror", error });
              };
            });
          </script> -->
=======
>>>>>>> 870ac4b76f0515e02075793f1de7b87d435be421:public/views/index.html
    </body>
</html>
